local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

local Window = Fluent:CreateWindow({
    Title = "Viper Hub Dead-Rails",
    SubTitle = "by Viper_",
    TabWidth = 160,
    Size = UDim2.fromOffset(480, 365),
    Acrylic = false, -- The blur may be detectable, setting this to false disables blur entirely
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl -- Used when theres no MinimizeKeybind
})

-- Fluent provides Lucide Icons, they are optional
local Tabs = {
    Main = Window:AddTab({ Title = "Tab Visual", Icon = "" }),
    Aimbot = Window:AddTab({ Title = "Tab Aimbot", Icon = "" }),
}

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create circular logo button
local logoButton = Instance.new("ImageButton")
logoButton.Name = "FloatingLogo"
logoButton.Size = UDim2.new(0, 30, 0, 30) -- Small circle size
logoButton.Position = UDim2.new(0, 10, 0, 10) -- Top-left corner
logoButton.Image = "rbxassetid://101883839381557" -- Replace with your image ID
logoButton.BackgroundTransparency = 1
logoButton.ClipsDescendants = true
logoButton.ZIndex = 1000
logoButton.Parent = playerGui

-- Make it circular
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(1, 0) -- Fully round
corner.Parent = logoButton


local espToggle = Tabs.Main:AddToggle("EspToggle", {
    Title = "ESP Box",
    Description = "Box Red Players",
    Default = false
})

local espConnections = {}
local espDrawings = {}
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- Create ESP box for player
local function createESP(player)
    if player == LocalPlayer or espDrawings[player] then return end

    local box = Drawing.new("Square")
    box.Thickness = 2
    box.Color = Color3.fromRGB(255, 0, 0)
    box.Filled = false
    box.Visible = true
    espDrawings[player] = box

    espConnections[player] = RunService.RenderStepped:Connect(function()
        local character = player.Character
        -- Attempt to find any base part (HumanoidRootPart, Torso, etc.)
        local root = character and (character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso") or character:FindFirstChildWhichIsA("BasePart"))

        -- If the root part exists and the player is alive, show ESP
        if root and character:FindFirstChildOfClass("Humanoid") and character:FindFirstChildOfClass("Humanoid").Health > 0 then
            local pos, visible = Camera:WorldToViewportPoint(root.Position)
            if visible then
                local size = Vector2.new(60, 100)  -- Adjust size if necessary
                box.Size = size
                box.Position = Vector2.new(pos.X - size.X/2, pos.Y - size.Y/2)
                box.Visible = true
            else
                box.Visible = false
            end
        else
            box.Visible = false
        end
    end)
end

-- Destroy ESP box for player
local function destroyESP(player)
    if espConnections[player] then
        espConnections[player]:Disconnect()
        espConnections[player] = nil
    end
    if espDrawings[player] then
        espDrawings[player]:Remove()
        espDrawings[player] = nil
    end
end

-- Enable ESP for all players
local function enableESP()
    for _, player in pairs(Players:GetPlayers()) do
        createESP(player)
    end
    Players.PlayerAdded:Connect(createESP)
    Players.PlayerRemoving:Connect(destroyESP)
end

-- Disable ESP for all players
local function disableESP()
    for _, player in pairs(Players:GetPlayers()) do
        destroyESP(player)
    end
end

-- Handle the ESP toggle using the OnChanged callback
espToggle:OnChanged(function(state)
    if state then
        enableESP()
    else
        disableESP()
    end
end)

-- Aimbot
Tabs.Aimbot:AddButton({
    Title = "Aimbot Lock",
    Description = "NPC Aimbot Head",
    Callback = function()
        -- Execute the script from the URL
        loadstring(game:HttpGet("https://raw.githubusercontent.com/viperobii/ViperisEnot/refs/heads/main/DeadLock.txt"))()
    end
})

local player = game:GetService("Players").LocalPlayer
local camera = workspace.CurrentCamera

function getClosestWalker()
    local closest, minDist = nil, math.huge
    for _, walker in pairs(workspace:GetChildren()) do
        if walker.Name == "Walker" and walker:FindFirstChild("Head") then
            local dist = (walker.Head.Position - player.Character.HumanoidRootPart.Position).Magnitude
            if dist < minDist then
                minDist = dist
                closest = walker
            end
        end
    end
    return closest
end

game:GetService("RunService").RenderStepped:Connect(function()
    local target = getClosestWalker()
    if target then
        camera.CFrame = CFrame.new(camera.CFrame.Position, target.Head.Position)
    end
end)


local Toggle = Tabs.Main:AddToggle("MyToggle", {Title = "Aimbot Zombie ", Default = false })

Toggle:OnChanged(function(v)
    _G.Aimbot = v
end)

spawn(function()
    pcall(function()
        while task.wait() do 
            if _G.Aimbot then
                local target = getClosestWalker()
                if target then  
                    camera.CFrame = CFrame.new(camera.CFrame.Position, target.Head.Position)
                end
            end
        end
    end)
end)
